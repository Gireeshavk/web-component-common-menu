<nav class="menu-container" [class.expanded]="isExpanded">
  <!-- Header Section with Toggle and Logo -->
  <div class="menu-header">
    <!-- Collapse button -->
    <button type="button" class="menu-toggle-btn" (click)="toggleMenu()" [hidden]="isLoading">
      <span class="iconify" [attr.data-icon]="isExpanded ? 'solar:alt-arrow-left-line-duotone' : 'solar:hamburger-menu-line-duotone'"></span>
    </button>
    
    <!-- Logo Section -->
    <div class="logo-section" *ngIf="(logoData || logoUrl) && !isLoading && isExpanded">
      <img [src]="logoData || logoUrl" [alt]="logoText || 'Logo'" class="">
      <span class="logo-text" *ngIf="logoText">{{ logoText }}</span>
    </div>
  </div>
  
  <!-- Shimmer loader -->
<div class="menu-content">
  <ng-container *ngIf="isLoading; else menuTemplate">
    <div *ngFor="let i of skeletonItems" class="shimmer-wrapper">
      <div class="shimmer-item" [class.expanded]="isExpanded"></div>
    </div>
  </ng-container>

  <!-- Real menu items -->
  <ng-template #menuTemplate>
    @for(item of menuItems; track trackByFn(item)) {
      <div class="menu-item-wrapper">
        <button 
          type="button" 
          class="menu-item-btn" 
          [class.active]="isActiveRoute(item.url)" 
          [class.expanded]="isExpanded"
          (click)="handleNavigation(item)"
          (keydown.enter)="handleNavigation(item)"
          [customTooltip]="!isExpanded ? item.functionalityName : ''"
          [attr.aria-label]="item.functionalityName">
          <span class="iconify" [attr.data-icon]="item.iconClass"></span>
          <span 
            #menuLabel
            class="menu-label" 
            [class.show]="isExpanded"
            [class.truncated]="menuLabel.scrollWidth > menuLabel.clientWidth"
            [customTooltip]="menuLabel.scrollWidth > menuLabel.clientWidth ? item.functionalityName : ''"
            *ngIf="isExpanded"
            >{{ item.functionalityName }}</span>
        </button>
      </div>
    }
  </ng-template>
  </div>
</nav>